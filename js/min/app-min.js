function findSequence(){sequence=[];for(var e,t=0;30>t;t++)e=Math.floor(4*Math.random())+1,sequence.push(e)}function displ(e){$(".disp h1").text(e)}function lvlcalc(){return 3>turnLength?speed[0]:6>turnLength?speed[1]:9>turnLength?speed[2]:12>turnLength?speed[3]:void 0}function toneNLight(e){var t=0;switch(e){case 1:$(".green").addClass("light"),t=$(".1")[0],t.play(),setTimeout(function(){$(".green").removeClass("light")},300);break;case 2:$(".red").addClass("light"),t=$(".2")[0],t.play(),setTimeout(function(){$(".red").removeClass("light")},300);break;case 3:$(".yellow").addClass("light"),t=$(".3")[0],t.play(),setTimeout(function(){$(".yellow").removeClass("light")},300);break;case 4:$(".blue").addClass("light"),t=$(".4")[0],t.play(),setTimeout(function(){$(".blue").removeClass("light")},300)}}function userTurn(){var e=0;$(".butn").click(function(){var t=Number($(this).attr("value"));if(toneNLight(t),t==sequence[e]){if(e++,e===turnLength){if(turnLength++,21===turnLength){displ("**");var n=0,s=setInterval(function(){$(".disp").toggleClass("dispOn"),n++,10===n&&(e=0,clearInterval(s),turnLength=1,inGame=!0,turnUser=!1,findSequence(),game())},300);return!1}turnUser=!1,$(".butn").off("click");var i=setTimeout(function(){game(),clearTimeout(i)},700)}}else{displ("!!"),turnUser=!1,isStrict&&(turnLength=1,findSequence());var i=setTimeout(function(){game(),clearTimeout(i),$(".butn").off("click"),displ(("0"+turnLength).slice(-2))},500)}}),butPress=0,e=0}function game(){if(displ(("0"+turnLength).slice(-2)),lvl=lvlcalc(),!turnUser)var e=0,t=setInterval(function(){toneNLight(sequence[e]),e++,e>=turnLength&&(clearInterval(t),turnUser=!0,game())},lvl);turnUser&&userTurn()}function gameOn(){isOn?($(".disp").addClass("dispOn"),displ("--"),$(".startbtn").click(function(){turnLength=1,sequence=[],inGame=!0,turnUser=!1,findSequence(),game()}),$(".strictbtn").click(function(){isStrict?(isStrict=!1,$(".led").removeClass("ledOn")):(isStrict=!0,$(".led").addClass("ledOn"))})):($(".disp").removeClass("dispOn"),displ("88"),$(".led").removeClass("ledOn"),$(".startbtn").off("click"),$(".strictbtn").off("click"),isStrict=!1,inGame=!1)}var inGame=!1,turnUser=!1,isOn=!1,isStrict=!1,sequence=[],turnLength=0,speed=[1200,700,500,300];$(document).ready(function(){$("#onOff").click(function(){isOn=!isOn,gameOn()})});